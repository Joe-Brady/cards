function card(e,r){this.suit=e,this.rank=r}document.addEventListener("DOMContentLoaded",function(e){updateDeckView(),updateDrawnView(),greyOut("sortdeck")});const suits=["clubs","spades","hearts","diamonds"],ranks=[2,3,4,5,6,7,8,9,10,"J","Q","K","A"];var deck=[],drawn=[],suitCounter=0;suits.forEach(function(){var e=0;ranks.forEach(function(){var r=new card(suits[suitCounter],ranks[e]);deck.push(r),e++}),suitCounter++});const shuffleDeckButton=document.getElementById("shuffledeck"),sortDeckButton=document.getElementById("sortdeck"),drawCardsButton=document.getElementById("drawcards"),foldAllCardsButton=document.getElementById("foldallcards"),drawError=document.getElementById("drawerror"),drawInput=document.getElementById("drawinput");var shuffleDeck=function(){var e=[],r=deck.length;for(i=0;i<r;i++)e.push(deck.splice(Math.floor(Math.random()*deck.length),1)[0]);return deck=e,updateDeckView(),deck},sortCards=function(e){function r(e){return e.rank==ranks[i]}function t(e){return e.suit==suits[i]}var a=[];for(i=0;i<ranks.length;i++)a.push.apply(a,e.filter(r));var n=[];for(i=0;i<ranks.length;i++)n.push.apply(n,a.filter(t));var d=n;return d},drawCards=function(e){var r=Math.floor(e);if(0==deck){var t="There are no cards left in the deck!";return drawError.innerHTML=t,"Error flagged"}if(r>=1&&r<=deck.length){for(reactivate("foldallcards"),i=0;i<r;i++)drawn.push(deck.splice(Math.floor(Math.random()*deck.length),1)[0]);return drawn=sortCards(drawn),drawError.innerHTML="",updateDeckView(),updateDrawnView(),drawn}var t="Please enter a number between 1 and "+deck.length;return drawError.innerHTML=t,"Error flagged"},returnToDeck=function(e,r){deck.push.apply(deck,drawn.splice(e,r)),reactivate("drawcards"),reactivate("sortdeck"),updateDeckView(),updateDrawnView()};const suitImages=["assets/club.png","assets/spade.png","assets/heart.png","assets/diamond.png"],bp1Deck='<div id="animatableCards" class="card overlap"><div class="card-value-section">',bp1Drawn='<div class="card"><div class="card-value-section">',bp2='<div class="left-align"><span>',bp3='</span><img src="',bp4='"></div></div><div class="card-suit-section"><img src="',bp5='"></div><div class="card-value-section mirrored">',bp6='"></div></div></div>';var updateDeckView=function(){var e="";if(0==deck.length)e='<div class="card empty"></div>',greyOut("drawcards");else for(i=0;i<deck.length;i++){var r=suits.indexOf(deck[i].suit),t=suitImages[r],a=bp2+deck[i].rank+bp3+t,n=bp1Deck+a+bp4+t+bp5+a+bp6;e+=n}document.getElementById("deck").innerHTML=e},updateDrawnView=function(){var e="";if(0==drawn.length)e='<div class="card empty"></div>',greyOut("foldallcards");else for(i=0;i<drawn.length;i++){var r=suits.indexOf(drawn[i].suit),t=suitImages[r],a=bp2+drawn[i].rank+bp3+t,n=bp1Drawn+a+bp4+t+bp5+a+bp6;e+=n}document.getElementById("drawn").innerHTML=e},greyOut=function(e){document.getElementById(e).className="greyedOut"},reactivate=function(e){document.getElementById(e).className=document.getElementById(e).className.replace(/(?:^|\s)greyedOut(?!\S)/g,"")};shuffleDeckButton.onclick=function(){reactivate("sortdeck"),shuffleDeck()},sortDeckButton.onclick=function(){deck=sortCards(deck),updateDeckView(),greyOut("sortdeck")},drawCardsButton.onclick=function(){var e=drawInput.value;drawCards(e),drawInput.value=1},drawInput.onkeypress=function(e){e||(e=window.event);var r=e.keyCode||e.which;if("13"==r){var t=drawInput.value;return drawCards(t),drawInput.value=1,!1}},foldAllCardsButton.onclick=function(){returnToDeck(0,drawn.length)};